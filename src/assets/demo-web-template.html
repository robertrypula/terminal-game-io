<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Terminal Game UI - web demo</title>
</head>
<body onLoad="run()">
  <pre id="root"></pre>

  <script>
    var FPS = 5;
    var BOARD_WIDTH = 40;
    var BOARD_HEIGHT = 12;

    var terminalGameIo;
    var lastKeyName = '';
    var posX = Math.round(BOARD_WIDTH / 2);
    var posY = Math.round(BOARD_HEIGHT / 2);
    var frameNumber = 0;

    function frameHandler(instance) {
      var frameData = '';

      for (var y = 0; y < BOARD_HEIGHT; y++) {
        for (var x = 0; x < BOARD_WIDTH; x++) {
          frameData += (posX === x && posY === y) ? '@' : '.';
        }
      }

      instance.drawFrame(frameData, BOARD_WIDTH, BOARD_HEIGHT);
      instance.write('Frame: ' + (frameNumber++) + '\n');
      instance.write('Time: ' + instance.getTime().toFixed(3) + 's\n');
      instance.write('Last key name: ' + lastKeyName + '\n\n');
      instance.write('Use arrows to move.\n');
      instance.write('Press Escape to exit...\n');
    }

    function keypressHandler(instance, keyName) {
      lastKeyName = keyName;

      switch (keyName) {
        case 'ArrowDown':
          posY = (posY + 1) % BOARD_HEIGHT;
          break;
        case 'ArrowUp':
          posY = posY === 0 ? BOARD_HEIGHT - 1 : posY - 1;
          break;
        case 'ArrowLeft':
          posX = posX === 0 ? BOARD_WIDTH - 1 : posX - 1;
          break;
        case 'ArrowRight':
          posX = (posX + 1) % BOARD_WIDTH;
          break;
        case 'Escape':
          instance.exit();
          break;
      }

      frameHandler(instance);
    }

    function run() {
      terminalGameIo = new TerminalGameIo.createTerminalGameIo({
        // domElementId: 'my-custom-id',     // default: 'root'
        fps: FPS,
        frameHandler: frameHandler,
        keypressHandler: keypressHandler
      });
    }
  </script>
  <!-- yon can access distribution version via: <script src="https://unpkg.com/terminal-game-io"></script> -->
</body>
</html>
